<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 610 110" width="600" height="100" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <style>
      .title {
        font-size: 1.5em;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
      }
      .description {
        font-size: 0.75em;
        text-overflow: ellipsis;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
      }
      .text {
        text-align: start;
        padding: 10px;
        height: calc(100% - 20px);
        margin-left: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
        color: black;
      }
           .date {
        font-size: 0.5em;
        opacity: 0.5;
        text-align: end;
        position: absolute;
        bottom: 0;
        right: 10px;
        color: black;
      }
      
      .main {
        fill: white;
      }
      .data {
        opacity: 0.75;
        text-align: start;
        position: absolute;
        bottom: 0;
        padding-bottom: 5px;
        left: 10px;
        color: black;
        max-width: 400px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .author {
        opacity: 0.75;
        font-size: 0.5em;
      }
      .category {
        background-color: rgba(0, 0, 0, 0.25);
        border-radius: 0.25em;
        padding: 0.125em 0.25em;
        font-size: 0.75em;
        color: rgba(0, 0, 0, 0.8);
      }
    </style>
  </defs>
  <g class="main">
    <rect class="content" width="600" height="100" stroke="rgba(0, 0, 0, 0.5)" x="5" y="5" rx="10" />
    <foreignObject width="600" height="100" x="5" y="5">
      <div xmlns="http://www.w3.org/1999/xhtml" style="border-radius: 5px; overflow: hidden; height: 100%;">
        <div class="text">
          <div class="title">Un&#0032;server&#0032;Http&#0032;in&#0032;Dart</div>
          <div class="description">In&#0032;questo&#0032;articolo&#0044;&#0032;esploreremo&#0032;passo&#0032;dopo&#0032;passo&#0032;come&#0032;sviluppare&#0032;un&#0032;server&#0032;HTTP&#0032;in&#0032;Dart&#0046;&#0032;Partiremo&#0032;dalle&#0032;basi&#0044;&#0032;illustrando&#0032;come&#0032;creare&#0032;un&#0032;server&#0032;di&#0032;base&#0032;in&#0032;grado&#0032;di&#0032;gestire&#0032;le&#0032;richieste&#0032;in&#0032;arrivo&#0046;&#0032;Successivamente&#0044;&#0032;approfondiremo&#0032;argomenti&#0032;pi&#0249;&#0032;avanzati&#0032;come&#0032;la&#0032;gestione&#0032;delle&#0032;rotte&#0044;&#0032;l&#0039;elaborazione&#0032;di&#0032;richieste&#0032;e&#0032;risposte&#0044;&#0032;e&#0032;l&#0039;implementazione&#0032;di&#0032;middleware&#0046;&#0010;&#0010;&#0010;&#0010;Inizializziamo&#0032;il&#0032;progetto&#0010;Per&#0032;la&#0032;creazione&#0032;del&#0032;nuovo&#0032;progetto&#0032;Dart&#0044;&#0032;dal&#0032;terminale&#0032;di&#0032;VSCode&#0032;digitiamo&#0032;i&#0032;seguenti&#0032;comandi&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0160;dart&#0032;create&#0032;dart&#0095;server&#0095;http&#0010;&#0010;&#0160;cd&#0032;dart&#0095;server&#0095;http&#0010;&#0010;&#0032;code&#0032;&#0046;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Aperto&#0032;il&#0032;progetto&#0044;&#0032;rimuoviamo&#0032;le&#0032;cartelle&#0160;lib&#0160;e&#0032;test&#0032;&#0040;per&#0032;il&#0032;nostro&#0032;scopo&#0032;non&#0032;ci&#0032;occorrono&#0041;&#0032;e&#0032;modifichiamo&#0032;il&#0032;file&#0032;bin&#0047;dart&#0095;server&#0095;http&#0032;in&#0032;questo&#0032;modo&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;void&#0032;main&#0040;List&#0060;String&#0062;&#0032;arguments&#0041;&#0032;&#0123;&#0010;&#0160;&#0032;&#0010;&#0125;&#0010;&#0010;&#0010;&#0010;La&#0032;versione&#0032;base&#0010;Per&#0032;gestire&#0032;le&#0032;rotte&#0032;&#0040;inizialmente&#0032;solo&#0032;quella&#0032;principale&#0032;&#0034;&#0047;&#0034;&#0041;&#0044;&#0032;aggiungiamo&#0032;le&#0032;dipendenze&#0032;necessarie&#0044;&#0032;lavorando&#0032;sempre&#0032;dal&#0032;terminale&#0058;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0160;flutter&#0032;pub&#0032;add&#0032;shelf&#0010;&#0032;flutter&#0032;pub&#0032;add&#0032;shelf&#0095;router&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;aggiungiamo&#0032;quindi&#0032;il&#0160;Router&#0040;&#0041;&#0044;&#0032;definiamo&#0032;la&#0032;rotta&#0032;&#0034;&#0047;&#0034;&#0032;e&#0032;l&#0039;handler&#0032;che&#0032;sar&#0224;&#0032;invocato&#0160;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;import&#0032;&#0039;package&#0058;shelf&#0047;shelf&#0046;dart&#0039;&#0059;&#0010;import&#0032;&#0039;package&#0058;shelf&#0095;router&#0047;shelf&#0095;router&#0046;dart&#0039;&#0059;&#0010;&#0010;import&#0032;&#0039;package&#0058;shelf&#0095;router&#0047;shelf&#0095;router&#0046;dart&#0039;&#0059;&#0010;&#0010;&#0010;final&#0032;router&#0032;&#0061;&#0032;Router&#0040;&#0041;&#0010;&#0160;&#0032;&#0046;&#0046;get&#0040;&#0039;&#0047;&#0039;&#0044;&#0032;&#0095;rootHandler&#0041;&#0010;&#0160;&#0032;&#0059;&#0010;&#0010;Response&#0032;&#0095;rootHandler&#0040;Request&#0032;req&#0041;&#0032;&#0123;&#0010;&#0160;&#0032;return&#0032;Response&#0046;ok&#0040;&#0039;Hello&#0044;&#0032;World&#0033;&#0092;n&#0039;&#0041;&#0059;&#0010;&#0125;&#0010;&#0010;&#0010;&#0010;Modifichiamo&#0032;il&#0032;metodo&#0160;main&#0040;&#0041;&#0160;in&#0032;questo&#0032;modo&#0032;per&#0032;avviare&#0032;l&#0039;ascolto&#0032;del&#0032;server&#0032;&#0040;chiaramente&#0032;sar&#0224;&#0032;un&#0032;metodo&#0032;asincrono&#0041;&#0058;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;void&#0032;main&#0040;List&#0060;String&#0062;&#0032;arguments&#0041;&#0032;async&#0032;&#0123;&#0010;&#0160;&#0032;final&#0032;ip&#0032;&#0061;&#0032;&#0034;127&#0046;0&#0046;0&#0046;1&#0034;&#0059;&#0010;&#0160;&#0032;final&#0032;port&#0032;&#0061;&#0032;8080&#0059;&#0010;&#0010;&#0160;&#0032;final&#0032;handler&#0032;&#0061;&#0032;Pipeline&#0040;&#0041;&#0046;addHandler&#0040;router&#0046;call&#0041;&#0059;&#0010;&#0010;&#0160;&#0032;final&#0032;server&#0032;&#0061;&#0032;await&#0032;serve&#0040;handler&#0044;&#0032;ip&#0044;&#0032;port&#0041;&#0059;&#0010;&#0160;&#0032;print&#0040;&#0039;Server&#0032;listening&#0032;&#0036;&#0123;server&#0046;address&#0046;host&#0125;&#0058;&#0036;&#0123;server&#0046;port&#0125;&#0039;&#0041;&#0059;&#0010;&#0125;&#0010;&#0010;&#0010;&#0010;&#0010;Avviamo&#0032;il&#0032;progetto&#0032;e&#0032;il&#0032;nostro&#0032;server&#0032;sar&#0224;&#0032;pronto&#0032;a&#0032;rispondere&#0032;all&#0039;indirizzo&#0160;127&#0046;0&#0046;0&#0046;1&#0160;e&#0032;sulla&#0032;porta&#0160;8080&#0160;con&#0032;il&#0032;classico&#0160;Hello&#0044;&#0032;World&#0033;&#0160;&#0046;&#0160;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Aggiungiamo&#0032;elementi&#0032;avanzati&#0010;Nell&#0039;esempio&#0032;precedente&#0044;&#0032;abbiamo&#0032;forzatamente&#0032;indicato&#0032;l&#0039;IP&#0032;su&#0032;cui&#0032;lasciare&#0032;in&#0032;ascolto&#0032;il&#0032;server&#0044;&#0032;ma&#0032;possiamo&#0032;anche&#0032;aggiungere&#0032;la&#0032;dipendenza&#0160;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;import&#0032;&#0039;dart&#0058;io&#0039;&#0059;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;ed&#0032;accettare&#0032;connessioni&#0032;da&#0032;qualsiasi&#0032;indirizzo&#0044;&#0032;con&#0032;questa&#0032;notazione&#0010;&#0010;&#0010;&#0010;&#0010;&#0160;&#0032;final&#0032;ip&#0032;&#0061;&#0032;InternetAddress&#0046;anyIPv4&#0059;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Allo&#0032;stesso&#0032;modo&#0044;&#0032;possiamo&#0032;eventualmente&#0032;ricavare&#0032;la&#0032;porta&#0032;dall&#0039;ambiente&#0032;su&#0032;cui&#0032;sta&#0032;girando&#0032;il&#0032;nostro&#0032;server&#0044;&#0032;con&#0032;questa&#0032;assegnazione&#0160;&#0010;&#0010;&#0010;&#0010;&#0032;final&#0032;port&#0032;&#0061;&#0032;int&#0046;parse&#0040;Platform&#0046;environment&#0091;&#0039;PORT&#0039;&#0093;&#0032;&#0063;&#0063;&#0032;&#0039;8080&#0039;&#0041;&#0059;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Possiamo&#0032;ancora&#0032;utilizzare&#0032;un&#0032;middleware&#0032;per&#0032;avere&#0032;un&#0032;log&#0032;di&#0032;tutte&#0032;le&#0032;richieste&#0032;ricevute&#0032;dal&#0032;server&#0044;&#0032;modificando&#0032;il&#0032;nostro&#0032;handler&#0058;&#0160;&#0010;&#0010;&#0010;&#0160;&#0032;final&#0032;handler&#0032;&#0061;&#0032;Pipeline&#0040;&#0041;&#0046;addMiddleware&#0040;logRequests&#0040;&#0041;&#0041;&#0046;addHandler&#0040;router&#0046;call&#0041;&#0059;&#0010;&#0010;&#0010;e&#0032;avere&#0032;un&#0032;log&#0032;come&#0032;questo&#0058;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Server&#0032;listening&#0032;0&#0046;0&#0046;0&#0046;0&#0058;8080&#0010;2025&#0045;01&#0045;31T14&#0058;26&#0058;11&#0046;287931&#0032;&#0032;0&#0058;00&#0058;00&#0046;005945&#0032;GET&#0032;&#0032;&#0032;&#0032;&#0032;&#0091;404&#0093;&#0032;&#0047;flutter&#0095;service&#0095;worker&#0046;js&#0010;2025&#0045;01&#0045;31T14&#0058;26&#0058;14&#0046;993291&#0032;&#0032;0&#0058;00&#0058;00&#0046;003056&#0032;GET&#0032;&#0032;&#0032;&#0032;&#0032;&#0091;200&#0093;&#0032;&#0047;&#0010;2025&#0045;01&#0045;31T14&#0058;26&#0058;17&#0046;044027&#0032;&#0032;0&#0058;00&#0058;00&#0046;000067&#0032;GET&#0032;&#0032;&#0032;&#0032;&#0032;&#0091;404&#0093;&#0032;&#0047;flutter&#0095;service&#0095;worker&#0046;js&#0010;2025&#0045;01&#0045;31T14&#0058;26&#0058;24&#0046;823039&#0032;&#0032;0&#0058;00&#0058;00&#0046;000336&#0032;GET&#0032;&#0032;&#0032;&#0032;&#0032;&#0091;200&#0093;&#0032;&#0047;&#0010;2025&#0045;01&#0045;31T14&#0058;26&#0058;26&#0046;853715&#0032;&#0032;0&#0058;00&#0058;00&#0046;000052&#0032;GET&#0032;&#0032;&#0032;&#0032;&#0032;&#0091;404&#0093;&#0032;&#0047;flutter&#0095;service&#0095;worker&#0046;js&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Da&#0032;ultimo&#0032;possiamo&#0032;aggiungere&#0032;una&#0032;rotta&#0032;residuale&#0032;per&#0032;tutte&#0032;le&#0032;URL&#0032;non&#0032;gestite&#0044;&#0032;modificando&#0032;il&#0032;nostro&#0032;router&#0058;&#0160;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;final&#0032;router&#0032;&#0061;&#0032;Router&#0040;&#0041;&#0010;&#0160;&#0032;&#0046;&#0046;get&#0040;&#0039;&#0047;&#0039;&#0044;&#0032;&#0095;rootHandler&#0041;&#0010;&#0160;&#0032;&#0046;&#0046;all&#0040;&#0039;&#0047;&#0060;ignored&#0124;&#0046;&#0042;&#0062;&#0039;&#0044;&#0032;&#0040;Request&#0032;request&#0041;&#0032;&#0123;&#0010;&#0160;&#0032;&#0160;&#0032;return&#0032;Response&#0046;notFound&#0040;&#0039;Page&#0032;not&#0032;found&#0039;&#0041;&#0059;&#0010;&#0160;&#0032;&#0125;&#0041;&#0059;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;e&#0032;quindi&#0032;avere&#0032;una&#0032;risposta&#0032;di&#0032;questo&#0032;tipo&#0032;sulle&#0032;rotte&#0032;non&#0032;definite&#0058;&#0010;&#0010;&#0010;&#0010;&#0010;E&#0032;infine&#0032;possiamo&#0032;indicare&#0032;che&#0032;la&#0032;risposta&#0032;del&#0032;server&#0032;non&#0032;sia&#0032;semplice&#0032;testo&#0044;&#0032;ma&#0032;contenuto&#0032;HTML&#0044;&#0032;aggiungendo&#0032;il&#0032;corretto&#0032;Content&#0045;Type&#0058;&#0160;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Response&#0032;&#0095;rootHandler&#0040;Request&#0032;req&#0041;&#0032;&#0123;&#0010;&#0160;&#0032;return&#0032;Response&#0046;ok&#0040;&#0039;&#0060;h1&#0062;Hello&#0044;&#0032;World&#0033;&#0060;&#0047;h1&#0062;&#0092;n&#0039;&#0044;&#0010;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;headers&#0058;&#0032;&#0123;&#0039;Content&#0045;Type&#0039;&#0058;&#0032;&#0039;text&#0047;html&#0039;&#0125;&#0041;&#0059;&#0010;&#0125;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Lavoriamo&#0032;su&#0032;rotte&#0032;API&#0010;Potrebbe&#0032;essere&#0032;interessanti&#0032;gestire&#0032;delle&#0032;rotte&#0032;API&#0032;che&#0032;ritornino&#0032;dati&#0032;in&#0032;formato&#0032;JSON&#0046;&#0032;Aggiungiamo&#0032;una&#0032;nuova&#0032;dipendenza&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;import&#0032;&#0039;dart&#0058;convert&#0039;&#0059;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;quindi&#0032;definiamo&#0032;una&#0032;nuova&#0032;classe&#0032;che&#0032;espone&#0032;un&#0032;nuovo&#0032;router&#0032;specifico&#0058;&#0010;&#0010;&#0010;&#0010;&#0010;class&#0032;Api&#0032;&#0123;&#0010;&#0160;&#0032;List&#0060;int&#0062;&#0032;items&#0032;&#0061;&#0032;&#0091;1&#0044;&#0032;2&#0044;&#0032;3&#0044;&#0032;4&#0044;&#0032;5&#0093;&#0059;&#0010;&#0010;&#0160;&#0032;Future&#0060;Response&#0062;&#0032;&#0095;items&#0040;Request&#0032;request&#0041;&#0032;async&#0032;&#0123;&#0010;&#0160;&#0032;&#0160;&#0032;return&#0032;Response&#0046;ok&#0040;jsonEncode&#0040;items&#0041;&#0044;&#0010;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;headers&#0058;&#0032;&#0123;&#0039;Content&#0045;Type&#0039;&#0058;&#0032;&#0039;application&#0047;json&#0039;&#0125;&#0041;&#0059;&#0010;&#0160;&#0032;&#0125;&#0010;&#0010;&#0160;&#0032;Router&#0032;get&#0032;router&#0032;&#0123;&#0010;&#0160;&#0032;&#0160;&#0032;final&#0032;router&#0032;&#0061;&#0032;Router&#0040;&#0041;&#0059;&#0010;&#0010;&#0160;&#0032;&#0160;&#0032;router&#0046;get&#0040;&#0039;&#0047;items&#0039;&#0044;&#0032;&#0095;items&#0041;&#0059;&#0010;&#0160;&#0032;&#0160;&#0032;router&#0046;all&#0040;&#0039;&#0047;&#0060;ignored&#0124;&#0046;&#0042;&#0062;&#0039;&#0044;&#0032;&#0040;Request&#0032;request&#0041;&#0032;&#0061;&#0062;&#0032;Response&#0046;notFound&#0040;&#0039;null&#0039;&#0041;&#0041;&#0059;&#0010;&#0010;&#0160;&#0032;&#0160;&#0032;return&#0032;router&#0059;&#0010;&#0160;&#0032;&#0125;&#0010;&#0125;&#0010;&#0010;&#0010;Per&#0032;semplicit&#0224;&#0032;i&#0032;nostri&#0032;dati&#0032;sono&#0032;rappresentati&#0032;da&#0032;un&#0032;semplice&#0032;array&#0032;di&#0032;numeri&#0032;interi&#0032;che&#0032;viene&#0032;opportunamente&#0032;codificato&#0032;in&#0032;formato&#0032;JSON&#0046;&#0010;&#0010;&#0010;Montiamo&#0032;questa&#0032;classe&#0032;nel&#0032;router&#0032;principale&#0058;&#0010;&#0010;&#0010;&#0010;final&#0032;router&#0032;&#0061;&#0032;Router&#0040;&#0041;&#0010;&#0160;&#0032;&#0046;&#0046;get&#0040;&#0039;&#0047;&#0039;&#0044;&#0032;&#0095;rootHandler&#0041;&#0010;&#0160;&#0032;&#0046;&#0046;mount&#0040;&#0039;&#0047;api&#0047;v1&#0046;0&#0047;&#0039;&#0044;&#0032;Api&#0040;&#0041;&#0046;router&#0046;call&#0041;&#0010;&#0160;&#0032;&#0046;&#0046;all&#0040;&#0039;&#0047;&#0060;ignored&#0124;&#0046;&#0042;&#0062;&#0039;&#0044;&#0032;&#0040;Request&#0032;request&#0041;&#0032;&#0123;&#0010;&#0160;&#0032;&#0160;&#0032;return&#0032;Response&#0046;notFound&#0040;&#0039;Page&#0032;not&#0032;found&#0039;&#0041;&#0059;&#0010;&#0160;&#0032;&#0125;&#0041;&#0059;&#0010;&#0010;&#0010;&#0010;e&#0032;quindi&#0032;testiamo&#0032;l&#0039;URL&#0010;&#0010;&#0010;&#0010;&#0010;Se&#0032;volessimo&#0032;gestire&#0032;anche&#0032;una&#0032;chiamata&#0032;POST&#0044;&#0032;sarebbe&#0032;sufficiente&#0032;gestire&#0032;la&#0032;nuova&#0032;rotta&#0032;ad&#0032;esempio&#0032;in&#0032;questo&#0032;modo&#0058;&#0010;&#0010;&#0010;&#0010;&#0010;&#0160;&#0032;&#0160;&#0032;&#0046;&#0046;&#0046;&#0010;&#0160;&#0032;&#0160;&#0032;router&#0046;post&#0040;&#0039;&#0047;items&#0039;&#0044;&#0032;&#0040;Request&#0032;request&#0041;&#0032;async&#0032;&#0123;&#0010;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;final&#0032;body&#0032;&#0061;&#0032;await&#0032;request&#0046;readAsString&#0040;&#0041;&#0059;&#0010;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;final&#0032;item&#0032;&#0061;&#0032;int&#0046;parse&#0040;body&#0041;&#0059;&#0010;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;items&#0046;add&#0040;item&#0041;&#0059;&#0010;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;return&#0032;Response&#0046;ok&#0040;jsonEncode&#0040;items&#0041;&#0044;&#0010;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;&#0160;&#0032;headers&#0058;&#0032;&#0123;&#0039;Content&#0045;Type&#0039;&#0058;&#0032;&#0039;application&#0047;json&#0039;&#0125;&#0041;&#0059;&#0010;&#0160;&#0032;&#0160;&#0032;&#0125;&#0041;&#0059;&#0010;&#0160;&#0160;&#0032;&#0160;&#0046;&#0046;&#0046;&#0010;&#0010;&#0010;&#0010;&#0010;&#0010;Conclusioni&#0010;&#0010;Gli&#0032;appunti&#0032;presentati&#0032;sono&#0032;un&#0032;buon&#0032;punto&#0032;di&#0032;partenza&#0032;per&#0032;fare&#0032;qualche&#0032;test&#0032;e&#0032;possono&#0032;essere&#0032;facilmente&#0032;ampliati&#0046;&#0032;Potete&#0160;trovare&#0032;il&#0032;codice&#0032;tra&#0032;le&#0032;mie&#0032;repo&#0032;GitHub&#0058;&#0160;https&#0058;&#0047;&#0047;github&#0046;com&#0047;luigimicco&#0047;dart&#0095;server&#0095;http</div>
          <div class="date">1&#0047;31&#0047;25</div>
          <div class="data">
            <span class="author"></span> 
          </div>
        </div>
      </div>
    </foreignObject>
  </g>
</svg>